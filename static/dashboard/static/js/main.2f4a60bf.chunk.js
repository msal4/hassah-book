(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{122:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n=a(28),r=a.n(n),c=a(85),i=a.n(c),s=a(4),o=a.n(s),d=a(86),l=a.n(d),u=a(132),j=a(15),b=a(1),v=a(0);function h(e){return!localStorage.getItem("token")?Object(v.jsx)(j.a,{to:"login"}):Object(v.jsx)(j.b,Object(b.a)({},e))}var O,m,p,x,g,f,y,k,N,w,C,$,S,q,A,Q,P,I,M,R,U,D,L,F,E,H,B,T,_,Y,W,K,J,z,G,V,X,Z,ee,te,ae,ne,re,ce,ie,se,oe,de,le,ue,je,be,ve,he,Oe,me,pe,xe,ge,fe,ye=a(12),ke=function(e){var t=e.error,a=void 0===t||t,n=e.message,r=void 0===n?"Something went wrong":n;return a?Object(v.jsx)("div",{className:"text-red-400",children:r}):null},Ne=function(e){var t=e.loading;return void 0===t||t?Object(v.jsx)("div",{children:"Loading..."}):null},we=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"flex flex-col bg-yellow-50 h-screen w-40 fixed",children:[Object(v.jsx)(Ce,{path:"/",name:"Home"}),Object(v.jsx)(Ce,{path:"/orders",name:"Orders"}),Object(v.jsx)(Ce,{path:"/requests",name:"Requests"}),Object(v.jsx)(Ce,{path:"/users",name:"Users"}),Object(v.jsx)(Ce,{path:"/products",name:"Products"}),Object(v.jsx)(Ce,{path:"/admins",name:"Admins"}),Object(v.jsx)(Ce,{path:"/categories",name:"Categories"}),Object(v.jsx)(Ce,{path:"/collections",name:"Collections"}),Object(v.jsx)(Ce,{path:"/authors",name:"Authors"}),Object(v.jsx)(Ce,{path:"/publishers",name:"Publishers"}),Object(v.jsx)(Ce,{path:"/logout",name:"Logout"})]}),Object(v.jsx)("div",{style:{minWidth:"10rem"}})]})},Ce=function(e){var t=e.name,a=e.path,n=Object(j.j)({path:a,exact:"/"===a});return Object(v.jsx)(ye.a,{className:"pl-5 py-4 hover:bg-purple-100 rounded-lg ".concat(n?"text-purple-400":""),to:a,children:t})},$e=a(7),Se=a(40),qe=a(134),Ae=a(129),Qe=(a(130),{});!function(e){e.Asc="ASC",e.Desc="DESC"}(pe||(pe={})),function(e){e.Canceled="Canceled",e.Delivered="Delivered",e.Delivering="Delivering",e.Failed="Failed",e.Pending="Pending",e.Processed="Processed"}(xe||(xe={})),function(e){e.Available="Available",e.ComingSoon="ComingSoon",e.OnSale="OnSale",e.SoldOut="SoldOut"}(ge||(ge={})),function(e){e.Failed="Failed",e.Pending="Pending",e.Processing="Processing",e.Success="Success"}(fe||(fe={}));var Pe=Object(Se.d)(O||(O=Object($e.a)(["\n    fragment Admin on Admin {\n  id\n  name\n  email\n  createdAt\n  updatedAt\n}\n    "]))),Ie=Object(Se.d)(m||(m=Object($e.a)(["\n    fragment LoginResponse on LoginResponse {\n  accessToken\n  refreshToken\n}\n    "]))),Me=Object(Se.d)(p||(p=Object($e.a)(["\n    fragment User on User {\n  id\n  name\n  phone\n  address\n  province\n  confirmed\n  createdAt\n  updatedAt\n}\n    "]))),Re=Object(Se.d)(x||(x=Object($e.a)(["\n    fragment Author on Author {\n  id\n  name\n  overview\n  image\n  createdAt\n  updatedAt\n}\n    "]))),Ue=Object(Se.d)(g||(g=Object($e.a)(["\n    fragment Publisher on Publisher {\n  id\n  name\n  createdAt\n  updatedAt\n}\n    "]))),De=Object(Se.d)(f||(f=Object($e.a)(["\n    fragment Category on Category {\n  id\n  name\n  createdAt\n  updatedAt\n}\n    "]))),Le=Object(Se.d)(y||(y=Object($e.a)(["\n    fragment Collection on Collection {\n  id\n  name\n  image\n  createdAt\n  updatedAt\n}\n    "]))),Fe=Object(Se.d)(k||(k=Object($e.a)(["\n    fragment Product on Product {\n  id\n  name\n  price\n  image\n  status\n  pages\n  overview\n  language\n  publishedAt\n  author {\n    ...Author\n  }\n  publisher {\n    ...Publisher\n  }\n  categories {\n    ...Category\n  }\n  collections {\n    ...Collection\n  }\n  createdAt\n  updatedAt\n}\n    ","\n","\n","\n",""])),Re,Ue,De,Le),Ee=Object(Se.d)(N||(N=Object($e.a)(["\n    fragment Purchase on Purchase {\n  id\n  quantity\n  createdAt\n  updatedAt\n  product {\n    ...Product\n  }\n}\n    ",""])),Fe),He=Object(Se.d)(w||(w=Object($e.a)(["\n    fragment Order on Order {\n  id\n  orderNumber\n  province\n  address\n  phone\n  status\n  totalPrice\n  createdAt\n  updatedAt\n  user {\n    ...User\n  }\n  purchases(take: 100) {\n    items {\n      ...Purchase\n    }\n    total\n    hasMore\n  }\n}\n    ","\n",""])),Me,Ee),Be=Object(Se.d)(C||(C=Object($e.a)(["\n    fragment PaginatedProductResponse on PaginatedProductResponse {\n  items {\n    ...Product\n  }\n  total\n  hasMore\n}\n    ",""])),Fe),Te=Object(Se.d)($||($=Object($e.a)(["\n    fragment UserRequest on UserRequest {\n  id\n  content\n  status\n  createdAt\n  updatedAt\n  user {\n    ...User\n  }\n}\n    ",""])),Me),_e=Object(Se.d)(S||(S=Object($e.a)(["\n    mutation CreateAdmin($data: CreateAdminInput!) {\n  createAdmin(data: $data) {\n    ...Admin\n  }\n}\n    ",""])),Pe);var Ye=Object(Se.d)(q||(q=Object($e.a)(["\n    mutation CreateAuthor($data: CreateAuthorInput!, $imageFile: Upload!) {\n  createAuthor(data: $data, imageFile: $imageFile) {\n    ...Author\n  }\n}\n    ",""])),Re);var We=Object(Se.d)(A||(A=Object($e.a)(["\n    mutation CreateCategory($data: CreateCategoryInput!) {\n  createCategory(data: $data) {\n    ...Category\n  }\n}\n    ",""])),De);var Ke=Object(Se.d)(Q||(Q=Object($e.a)(["\n    mutation CreateCollection($data: CreateCollectionInput!, $imageFile: Upload!) {\n  createCollection(data: $data, imageFile: $imageFile) {\n    ...Collection\n  }\n}\n    ",""])),Le);var Je=Object(Se.d)(P||(P=Object($e.a)(["\n    mutation CreateProduct($data: CreateProductInput!, $imageFile: Upload!) {\n  createProduct(data: $data, imageFile: $imageFile) {\n    ...Product\n  }\n}\n    ",""])),Fe);var ze=Object(Se.d)(I||(I=Object($e.a)(["\n    mutation CreatePublisher($data: CreatePublisherInput!) {\n  createPublisher(data: $data) {\n    ...Publisher\n  }\n}\n    ",""])),Ue);var Ge=Object(Se.d)(M||(M=Object($e.a)(["\n    mutation CreateUser($data: CreateUserInput!) {\n  createUser(data: $data) {\n    ...User\n  }\n}\n    ",""])),Me);var Ve=Object(Se.d)(R||(R=Object($e.a)(["\n    mutation DeleteAdmin($id: ID!) {\n  deleteAdmin(id: $id)\n}\n    "])));var Xe=Object(Se.d)(U||(U=Object($e.a)(["\n    mutation DeleteAuthor($id: ID!) {\n  deleteAuthor(id: $id)\n}\n    "])));var Ze=Object(Se.d)(D||(D=Object($e.a)(["\n    mutation DeleteCategory($id: ID!) {\n  deleteCategory(id: $id)\n}\n    "])));var et=Object(Se.d)(L||(L=Object($e.a)(["\n    mutation DeleteCollection($id: ID!) {\n  deleteCollection(id: $id)\n}\n    "])));var tt=Object(Se.d)(F||(F=Object($e.a)(["\n    mutation DeleteProduct($id: ID!) {\n  deleteProduct(id: $id)\n}\n    "])));var at=Object(Se.d)(E||(E=Object($e.a)(["\n    mutation DeletePublisher($id: ID!) {\n  deletePublisher(id: $id)\n}\n    "])));Object(Se.d)(H||(H=Object($e.a)(["\n    mutation DeleteUserRequest($id: ID!) {\n  deleteRequest(id: $id)\n}\n    "])));var nt=Object(Se.d)(B||(B=Object($e.a)(["\n    mutation DeleteUser($id: ID!) {\n  deleteUser(id: $id)\n}\n    "])));var rt=Object(Se.d)(T||(T=Object($e.a)(["\n    mutation Login($data: LoginAdminInput!) {\n  loginAdmin(data: $data) {\n    ...LoginResponse\n  }\n}\n    ",""])),Ie);var ct=Object(Se.d)(_||(_=Object($e.a)(["\n    mutation UpdateAdmin($data: UpdateAdminInput!) {\n  updateAdmin(data: $data)\n}\n    "])));var it=Object(Se.d)(Y||(Y=Object($e.a)(["\n    mutation UpdateAuthor($data: UpdateAuthorInput!, $imageFile: Upload) {\n  updateAuthor(data: $data, imageFile: $imageFile)\n}\n    "])));var st=Object(Se.d)(W||(W=Object($e.a)(["\n    mutation UpdateCategory($data: UpdateCategoryInput!) {\n  updateCategory(data: $data)\n}\n    "])));var ot=Object(Se.d)(K||(K=Object($e.a)(["\n    mutation UpdateCollection($data: UpdateCollectionInput!, $imageFile: Upload) {\n  updateCollection(data: $data, imageFile: $imageFile)\n}\n    "])));var dt=Object(Se.d)(J||(J=Object($e.a)(["\n    mutation UpdateOrder($data: UpdateOrderInput!) {\n  updateOrder(data: $data)\n}\n    "])));function lt(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(dt,t)}var ut=Object(Se.d)(z||(z=Object($e.a)(["\n    mutation UpdateProduct($data: UpdateProductInput!, $imageFile: Upload) {\n  updateProduct(data: $data, imageFile: $imageFile)\n}\n    "])));function jt(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(ut,t)}var bt=Object(Se.d)(G||(G=Object($e.a)(["\n    mutation UpdatePublisher($data: UpdatePublisherInput!) {\n  updatePublisher(data: $data)\n}\n    "])));var vt=Object(Se.d)(V||(V=Object($e.a)(["\n    mutation UpdateUserRequest($data: UpdateUserRequestInput!) {\n  updateRequest(data: $data)\n}\n    "])));function ht(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(vt,t)}var Ot=Object(Se.d)(X||(X=Object($e.a)(["\n    mutation UpdateUser($data: UpdateUserInput!) {\n  updateUser(data: $data)\n}\n    "])));var mt=Object(Se.d)(Z||(Z=Object($e.a)(["\n    query Admin($id: ID!) {\n  admin(id: $id) {\n    ...Admin\n  }\n}\n    ",""])),Pe);var pt=Object(Se.d)(ee||(ee=Object($e.a)(["\n    query Admins($skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  admins(skip: $skip, take: $take, order: $order, searchQuery: $searchQuery) {\n    items {\n      ...Admin\n    }\n    total\n    hasMore\n  }\n}\n    ",""])),Pe);var xt=Object(Se.d)(te||(te=Object($e.a)(["\n    query Author($id: ID!, $skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  author(id: $id) {\n    ...Author\n    products(take: $take, skip: $skip, order: $order, searchQuery: $searchQuery) {\n      ...PaginatedProductResponse\n    }\n  }\n}\n    ","\n",""])),Re,Be);var gt=Object(Se.d)(ae||(ae=Object($e.a)(["\n    query Authors($skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  authors(skip: $skip, take: $take, order: $order, searchQuery: $searchQuery) {\n    items {\n      ...Author\n    }\n    total\n    hasMore\n  }\n}\n    ",""])),Re);function ft(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(gt,t)}var yt=Object(Se.d)(ne||(ne=Object($e.a)(["\n    query Categories($skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  categories(skip: $skip, take: $take, order: $order, searchQuery: $searchQuery) {\n    items {\n      ...Category\n    }\n    total\n    hasMore\n  }\n}\n    ",""])),De);function kt(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(yt,t)}var Nt=Object(Se.d)(re||(re=Object($e.a)(["\n    query Category($id: ID!, $skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  category(id: $id) {\n    ...Category\n    products(take: $take, skip: $skip, order: $order, searchQuery: $searchQuery) {\n      ...PaginatedProductResponse\n    }\n  }\n}\n    ","\n",""])),De,Be);var wt=Object(Se.d)(ce||(ce=Object($e.a)(["\n    query Collection($id: ID!, $skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  collection(id: $id) {\n    ...Collection\n    products(take: $take, skip: $skip, order: $order, searchQuery: $searchQuery) {\n      ...PaginatedProductResponse\n    }\n  }\n}\n    ","\n",""])),Le,Be);var Ct=Object(Se.d)(ie||(ie=Object($e.a)(["\n    query Collections($skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  collections(skip: $skip, take: $take, order: $order, searchQuery: $searchQuery) {\n    items {\n      ...Collection\n    }\n    total\n    hasMore\n  }\n}\n    ",""])),Le);function $t(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(Ct,t)}var St=Object(Se.d)(se||(se=Object($e.a)(["\n    query Dashboard {\n  admins(take: 0) {\n    total\n  }\n  users(take: 0) {\n    total\n  }\n  products(take: 0) {\n    total\n  }\n  orders(take: 0) {\n    total\n  }\n  requests(take: 0) {\n    total\n  }\n  categories(take: 0) {\n    total\n  }\n  collections(take: 0) {\n    total\n  }\n  authors(take: 0) {\n    total\n  }\n  publishers(take: 0) {\n    total\n  }\n}\n    "])));var qt=Object(Se.d)(oe||(oe=Object($e.a)(["\n    query Order($id: ID!) {\n  order(id: $id) {\n    ...Order\n  }\n}\n    ",""])),He);var At=Object(Se.d)(de||(de=Object($e.a)(["\n    query Orders($skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  orders(skip: $skip, take: $take, order: $order, searchQuery: $searchQuery) {\n    items {\n      ...Order\n    }\n    total\n    hasMore\n  }\n}\n    ",""])),He);var Qt=Object(Se.d)(le||(le=Object($e.a)(["\n    query Product($id: ID!) {\n  product(id: $id) {\n    ...Product\n  }\n}\n    ",""])),Fe);var Pt=Object(Se.d)(ue||(ue=Object($e.a)(["\n    query Products($skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  products(skip: $skip, take: $take, order: $order, searchQuery: $searchQuery) {\n    ...PaginatedProductResponse\n  }\n}\n    ",""])),Be);function It(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(Pt,t)}var Mt=Object(Se.d)(je||(je=Object($e.a)(["\n    query Publisher($id: ID!, $skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  publisher(id: $id) {\n    ...Publisher\n    products(take: $take, skip: $skip, order: $order, searchQuery: $searchQuery) {\n      ...PaginatedProductResponse\n    }\n  }\n}\n    ","\n",""])),Ue,Be);var Rt=Object(Se.d)(be||(be=Object($e.a)(["\n    query Publishers($skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  publishers(skip: $skip, take: $take, order: $order, searchQuery: $searchQuery) {\n    items {\n      ...Publisher\n    }\n    total\n    hasMore\n  }\n}\n    ",""])),Ue);function Ut(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(Rt,t)}var Dt=Object(Se.d)(ve||(ve=Object($e.a)(["\n    query User($id: ID!) {\n  user(id: $id) {\n    ...User\n  }\n}\n    ",""])),Me);Object(Se.d)(he||(he=Object($e.a)(["\n    query UserRequest($id: ID!) {\n  request(id: $id) {\n    ...UserRequest\n  }\n}\n    ",""])),Te);var Lt=Object(Se.d)(Oe||(Oe=Object($e.a)(["\n    query UserRequests($skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  requests(skip: $skip, take: $take, order: $order, searchQuery: $searchQuery) {\n    items {\n      ...UserRequest\n    }\n    total\n    hasMore\n  }\n}\n    ",""])),Te);var Ft=Object(Se.d)(me||(me=Object($e.a)(["\n    query Users($skip: Int, $take: Int, $order: [OrderByMap!], $searchQuery: String) {\n  users(skip: $skip, take: $take, order: $order, searchQuery: $searchQuery) {\n    items {\n      ...User\n    }\n    total\n    hasMore\n  }\n}\n    ",""])),Me);var Et=a(6),Ht=a.n(Et),Bt=a(9),Tt=a(5),_t=function(){var e=Object(j.g)();return Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsxs)("button",{onClick:function(){return e.goBack()},className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",children:["<-"," Back"]})})},Yt=function(e){var t=e.id,a=e.className,n=e.type,r=void 0===n?"text":n,c=e.label,i=e.value,s=e.onChange,o=e.multiline,d=void 0!==o&&o,l={className:"ml-4 bg-purple-50 p-2 rounded",id:t,name:t,placeholder:c,value:i,onChange:function(e){return s(e.target.value)}};return Object(v.jsxs)("div",{className:"flex items-center justify-between ".concat(null!==a&&void 0!==a?a:""),children:[Object(v.jsx)("label",{htmlFor:t,children:c}),d?Object(v.jsx)("textarea",Object(b.a)({},l)):Object(v.jsx)("input",Object(b.a)({type:r},l))]})};function Wt(e){var t=e.data,a=e.searchQuery,n=e.onSearch,r=e.onLoadMore,c=e.actionComponent,i=e.highlight,s=e.name,o=e.limitHeight;return Object(v.jsxs)("div",{className:o?"overflow-y-scroll max-h-80":"",children:[Object(v.jsxs)("div",{className:"flex items-center mb-4",children:[Object(v.jsx)("input",{className:"p-2 mr-2 bg-purple-50 rounded-lg",placeholder:"Search",value:a,onChange:function(e){n(e.target.value)}}),Object(v.jsxs)("div",{children:["Total: ",null===t||void 0===t?void 0:t.total]})]}),null===t||void 0===t?void 0:t.items.map((function(e){return Object(v.jsxs)("div",{className:"flex items-center p-2 justify-between ".concat(i&&i(e)?"bg-purple-100":""),children:[Object(v.jsx)("div",{children:e.name}),Object(v.jsxs)("div",{className:"ml-6 flex items-center",children:[c&&c(e),Object(v.jsx)(ye.a,{className:"ml-4 text-purple-400",to:"/".concat(s,"/").concat(e.id,"/edit"),children:"Edit"})]})]},e.id)})),(null===t||void 0===t?void 0:t.hasMore)?Object(v.jsx)("div",{className:"text-center mt-2",children:Object(v.jsx)("button",{className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",onClick:r,children:"Load more"})}):null]})}function Kt(){return new URLSearchParams(Object(j.h)().search)}var Jt=function(){var e,t=Kt(),a=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(pt,t)}({variables:{searchQuery:t.get("q")}}),n=a.data,r=a.loading,c=a.error,i=a.refetch,s=a.fetchMore,o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(Ve,t)}(),d=Object(Tt.a)(o,1)[0],l=Object(j.g)();return c?Object(v.jsx)("div",{children:"something went wrong"}):r?Object(v.jsx)("div",{children:"Loading..."}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsxs)(ye.a,{to:"/admins/create",className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",children:["+"," Create"]})}),Object(v.jsx)(Wt,{name:"admins",data:null===n||void 0===n?void 0:n.admins,onSearch:function(e){t.set("q",e);var a=t.toString();l.push("/admins?".concat(a)),i({searchQuery:t.get("q")})},onLoadMore:function(){s({variables:{skip:null===n||void 0===n?void 0:n.admins.items.length}})},searchQuery:null!==(e=t.get("q"))&&void 0!==e?e:"",actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(prompt("Enter name","")!==e.name){t.next=5;break}return t.next=4,d({variables:{id:e.id}});case 4:i();case 5:case"end":return t.stop()}}),t)}))),children:"Remove"})}})]})},zt=function(){var e=Object(j.i)().adminID,t=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(mt,t)}({variables:{id:e}}),a=t.data,n=t.loading,r=t.error,c=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(ct,t)}(),i=Object(Tt.a)(c,2),o=i[0],d=i[1],l=Object(s.useState)(),u=Object(Tt.a)(l,2),h=u[0],O=u[1];return r?Object(v.jsx)(ke,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),!n||(null===a||void 0===a?void 0:a.admin)?Object(v.jsx)(Xt,{admin:a.admin,loading:d.loading,error:d.error,onSubmit:function(){var t=Object(Bt.a)(Ht.a.mark((function t(a){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(void 0),t.next=3,o({variables:{data:Object(b.a)(Object(b.a)({},a),{},{id:e})}});case 3:t.sent.errors||O("Admin updated");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}):Object(v.jsx)(Ne,{}),Object(v.jsx)("div",{className:"text-green-400",children:h})]})},Gt=function(){var e=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(_e,t)}(),t=Object(Tt.a)(e,2),a=t[0],n=t[1],r=n.loading,c=n.error,i=Object(s.useState)(),o=Object(Tt.a)(i,2),d=o[0],l=o[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),Object(v.jsx)(Xt,{loading:r,error:c,onSubmit:function(){var e=Object(Bt.a)(Ht.a.mark((function e(t){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(void 0),e.next=3,a({variables:{data:t}});case 3:e.sent.errors||l("admin created");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(v.jsx)("div",{className:"text-green-400",children:d})]})};function Vt(e,t){switch(t.type){case"name":return Object(b.a)(Object(b.a)({},e),{},{name:t.payload});case"email":return Object(b.a)(Object(b.a)({},e),{},{email:t.payload});case"password":return Object(b.a)(Object(b.a)({},e),{},{password:t.payload});default:return e}}var Xt=function(e){var t,a=e.admin,n=e.onSubmit,r=e.error,c=e.loading,i=Object(s.useReducer)(Vt,null!==a&&void 0!==a?a:{}),o=Object(Tt.a)(i,2),d=o[0],l=o[1];return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(Yt,{className:"mb-4",id:"name",label:"Name",value:d.name,onChange:function(e){l({type:"name",payload:e})}}),Object(v.jsx)(Yt,{className:"mb-4",id:"email",label:"email",value:d.email,onChange:function(e){l({type:"email",payload:e})}}),Object(v.jsx)(Yt,{className:"mb-4",id:"password",label:"Password",value:null!==(t=d.password)&&void 0!==t?t:"",onChange:function(e){l({type:"password",payload:e})}}),Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("button",{disabled:c,className:"".concat(c?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:function(){var e;if(!d.name||!d.email)throw new window.Error("missing required fields");n({name:d.name,email:d.email,password:null!==(e=d.password)&&void 0!==e?e:void 0})},children:"Submit"}),Object(v.jsx)("div",{className:"text-red-400 mt-2",children:null===r||void 0===r?void 0:r.message})]})]})})};function Zt(e){var t,a,n,r,c;if(!e.name||!e.overview||!e.status||!e.author)throw console.log(e),new Error("missing required fields");return{id:e.id,name:e.name,overview:e.overview,status:e.status,price:null!==(t=e.price)&&void 0!==t?t:0,author:{id:e.author.id},categories:null!==(a=null===(n=e.categories)||void 0===n?void 0:n.map((function(e){return{id:e.id}})))&&void 0!==a?a:[],collections:null!==(r=null===(c=e.collections)||void 0===c?void 0:c.map((function(e){return{id:e.id}})))&&void 0!==r?r:[],pages:e.pages,language:e.language,publishedAt:e.publishedAt,publisher:e.publisher&&{id:e.publisher.id}}}var ea=function(){var e,t=Kt(),a=ft({variables:{searchQuery:t.get("q")}}),n=a.data,r=a.loading,c=a.error,i=a.refetch,s=a.fetchMore,o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(Xe,t)}(),d=Object(Tt.a)(o,1)[0],l=Object(j.g)();return c?Object(v.jsx)("div",{children:"something went wrong"}):r?Object(v.jsx)("div",{children:"Loading..."}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsxs)(ye.a,{to:"/authors/create",className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",children:["+"," Create"]})}),Object(v.jsx)(Wt,{name:"authors",data:null===n||void 0===n?void 0:n.authors,onSearch:function(e){t.set("q",e);var a=t.toString();l.push("/authors?".concat(a)),i({searchQuery:t.get("q")})},onLoadMore:function(){s({variables:{skip:null===n||void 0===n?void 0:n.authors.items.length}})},searchQuery:null!==(e=t.get("q"))&&void 0!==e?e:"",actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(prompt("Enter name to delete it","")!==e.name){t.next=5;break}return t.next=4,d({variables:{id:e.id}});case 4:i();case 5:case"end":return t.stop()}}),t)}))),children:"Remove"})}})]})},ta=function(){var e,t,a,n,r,c,i=Object(j.i)().authorID,s=Kt(),o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(xt,t)}({variables:{id:i,searchQuery:s.get("cq")}}),d=It({variables:{searchQuery:s.get("pq")}}),l=jt(),u=Object(Tt.a)(l,1)[0],h=Object(j.g)();return o.error?Object(v.jsx)(ke,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),Object(v.jsxs)("div",{className:"flex items-start",children:[!o.loading||(null===(e=o.data)||void 0===e?void 0:e.author)?Object(v.jsx)(na,{author:o.data.author}):Object(v.jsx)(Ne,{}),Object(v.jsx)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:Object(v.jsx)(Wt,{limitHeight:!0,name:"products",data:null===(t=o.data)||void 0===t||null===(a=t.author)||void 0===a?void 0:a.products,onSearch:function(e){s.set("cq",e);var t=s.toString();h.push("/authors/".concat(i,"/edit?").concat(t)),o.refetch({searchQuery:s.get("cq")})},onLoadMore:function(){var e,t;o.fetchMore({variables:{skip:null===(e=o.data)||void 0===e||null===(t=e.author)||void 0===t?void 0:t.products.items.length}})},searchQuery:null!==(n=s.get("cq"))&&void 0!==n?n:""})}),Object(v.jsx)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:Object(v.jsx)(Wt,{limitHeight:!0,name:"products",data:null===(r=d.data)||void 0===r?void 0:r.products,onSearch:function(e){s.set("pq",e);var t=s.toString();h.push("/authors/".concat(i,"/edit?").concat(t)),d.refetch({searchQuery:s.get("pq")})},onLoadMore:function(){var e;d.fetchMore({variables:{skip:null===(e=d.data)||void 0===e?void 0:e.products.items.length}})},searchQuery:null!==(c=s.get("pq"))&&void 0!==c?c:"",highlight:function(e){return!!e.categories.find((function(e){return e.id===i}))},actionComponent:function(e){var t=e.author.id===i;return Object(v.jsx)("button",{className:t?"text-gray-400":"text-blue-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure you wanna set the author for this product")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u({variables:{data:Object(b.a)(Object(b.a)({},Zt(Object(b.a)(Object(b.a)({},e),{},{author:{id:i}}))),{},{id:e.id})}});case 4:o.refetch(),d.refetch();case 6:case"end":return t.stop()}}),t)}))),children:"Set"})}})})]})]})},aa=function(){var e=Object(s.useState)(""),t=Object(Tt.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(""),c=Object(Tt.a)(r,2),i=c[0],o=c[1],d=Object(s.useState)(),l=Object(Tt.a)(d,2),u=l[0],h=l[1],O=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(Ye,t)}(),m=Object(Tt.a)(O,2),p=m[0],x=m[1],g=x.data,f=x.loading,y=x.error,k=Object(s.useState)(),N=Object(Tt.a)(k,2),w=N[0],C=N[1],$=Object(s.useRef)();return(null===g||void 0===g?void 0:g.createAuthor)?Object(v.jsx)(j.a,{to:"/authors/".concat(g.createAuthor.id,"/edit")}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsx)(_t,{})}),Object(v.jsxs)("div",{children:[Object(v.jsx)(Yt,{id:"name",label:"Name",value:a,onChange:function(e){n(e)}}),Object(v.jsx)(Yt,{id:"overview",label:"Overview",value:i,onChange:function(e){o(e)}}),Object(v.jsx)("img",{className:"object-cover w-28 h-28 mt-4",src:$.current,alt:""}),w&&Object(v.jsx)("button",{className:"text-red-400",onClick:function(){$.current=void 0,C(void 0)},children:"Remove"}),Object(v.jsx)("input",{id:"image",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files,a=t&&t[0];if(a){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){$.current=n.result,C(a)},n.onerror=function(){$.current=void 0,C(void 0)}}}}),Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("button",{disabled:f,className:"".concat(f?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:Object(Bt.a)(Ht.a.mark((function e(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(void 0),e.next=3,p({variables:{data:{name:a,overview:i},imageFile:w}});case 3:e.sent.errors||h("Author updated");case 5:case"end":return e.stop()}}),e)}))),children:"Create"}),Object(v.jsx)(Ne,{loading:f}),Object(v.jsx)(ke,{error:!!y,message:null===y||void 0===y?void 0:y.message}),Object(v.jsx)("div",{className:"text-green-400 mt-2",children:u})]})]})]})},na=function(e){var t,a=e.author,n=Object(s.useState)(a.name),r=Object(Tt.a)(n,2),c=r[0],i=r[1],o=Object(s.useState)(),d=Object(Tt.a)(o,2),l=d[0],u=d[1],j=Object(s.useState)(a.overview),h=Object(Tt.a)(j,2),O=h[0],m=h[1],p=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(it,t)}(),x=Object(Tt.a)(p,2),g=x[0],f=x[1],y=f.loading,k=f.error,N=Object(s.useState)(),w=Object(Tt.a)(N,2),C=w[0],$=w[1],S=Object(s.useRef)();return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(Yt,{id:"name",label:"Name",value:c,onChange:function(e){i(e)}}),Object(v.jsx)(Yt,{id:"name",label:"Name",value:O,onChange:function(e){m(e)}}),Object(v.jsx)("img",{className:"object-cover w-28 h-28 mt-4",src:null!==(t=S.current)&&void 0!==t?t:a.image,alt:""}),C&&Object(v.jsx)("button",{className:"text-red-400",onClick:function(){S.current=void 0,$(void 0)},children:"Remove"}),Object(v.jsx)("input",{id:"image",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files,a=t&&t[0];if(a){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){S.current=n.result,$(a)},n.onerror=function(){S.current=void 0,$(void 0)}}}}),Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("button",{disabled:y,className:"".concat(y?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:Object(Bt.a)(Ht.a.mark((function e(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(void 0),e.next=3,g({variables:{data:{id:a.id,overview:O,name:c}}});case 3:e.sent.errors||u("Author updated");case 5:case"end":return e.stop()}}),e)}))),children:"Update"}),Object(v.jsx)("div",{className:"text-red-400 mt-2",children:null===k||void 0===k?void 0:k.message}),Object(v.jsx)("div",{className:"text-green-400 mt-2",children:l})]})]})})},ra=a(21),ca=function(){var e,t=Kt(),a=Object(j.g)(),n=kt({variables:{searchQuery:t.get("q")}}),r=n.data,c=n.error,i=n.fetchMore,s=n.refetch,o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(Ze,t)}(),d=Object(Tt.a)(o,1)[0];return c?Object(v.jsx)("div",{children:"Something went wrong"}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsxs)(ye.a,{to:"/categories/create",className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",children:["+"," Create"]})}),Object(v.jsx)(Wt,{name:"categories",data:null===r||void 0===r?void 0:r.categories,onSearch:function(e){t.set("q",e);var n=t.toString();a.push("/categories?".concat(n)),s({searchQuery:t.get("q")})},onLoadMore:function(){i({variables:{skip:null===r||void 0===r?void 0:r.categories.items.length}})},searchQuery:null!==(e=t.get("q"))&&void 0!==e?e:"",actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(prompt("Enter name to delete it","")!==e.name){t.next=5;break}return t.next=4,d({variables:{id:e.id}});case 4:s();case 5:case"end":return t.stop()}}),t)}))),children:"Remove"})}})]})},ia=function(){var e,t,a,n,r,c,i=Object(j.i)().categoryID,s=Kt(),o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(Nt,t)}({variables:{id:i,searchQuery:s.get("cq")}}),d=It({variables:{searchQuery:s.get("pq")}}),l=jt(),u=Object(Tt.a)(l,1)[0],h=Object(j.g)();return o.error?Object(v.jsx)(ke,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),Object(v.jsxs)("div",{className:"flex items-start",children:[!o.loading||(null===(e=o.data)||void 0===e?void 0:e.category)?Object(v.jsx)(oa,{category:o.data.category}):Object(v.jsx)(Ne,{}),Object(v.jsx)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:Object(v.jsx)(Wt,{limitHeight:!0,name:"products",data:null===(t=o.data)||void 0===t||null===(a=t.category)||void 0===a?void 0:a.products,onSearch:function(e){s.set("cq",e);var t=s.toString();h.push("/categories/".concat(i,"/edit?").concat(t)),o.refetch({searchQuery:s.get("cq")})},onLoadMore:function(){var e,t;o.fetchMore({variables:{skip:null===(e=o.data)||void 0===e||null===(t=e.category)||void 0===t?void 0:t.products.items.length}})},searchQuery:null!==(n=s.get("cq"))&&void 0!==n?n:"",actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u({variables:{data:Object(b.a)(Object(b.a)({id:e.id},Zt(e)),{},{categories:Object(ra.a)(e.categories.filter((function(e){return e.id!==i})).map((function(e){return{id:e.id}})))})}});case 4:o.refetch(),d.refetch();case 6:case"end":return t.stop()}}),t)}))),children:"Remove"})}})}),Object(v.jsx)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:Object(v.jsx)(Wt,{limitHeight:!0,name:"products",data:null===(r=d.data)||void 0===r?void 0:r.products,onSearch:function(e){s.set("pq",e);var t=s.toString();h.push("/categories/".concat(i,"/edit?").concat(t)),d.refetch({searchQuery:s.get("pq")})},onLoadMore:function(){var e;d.fetchMore({variables:{skip:null===(e=d.data)||void 0===e?void 0:e.products.items.length}})},searchQuery:null!==(c=s.get("pq"))&&void 0!==c?c:"",highlight:function(e){return!!e.categories.find((function(e){return e.id===i}))},actionComponent:function(e){var t=e.categories.find((function(e){return e.id===i})),a=t?Object(ra.a)(e.categories.filter((function(e){return e.id!==i})).map((function(e){return{id:e.id}}))):[].concat(Object(ra.a)(e.categories.map((function(e){return{id:e.id}}))),[{id:i}]);return Object(v.jsx)("button",{className:t?"text-red-400":"text-blue-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u({variables:{data:Object(b.a)(Object(b.a)({},Zt(Object(b.a)(Object(b.a)({},e),{},{categories:a}))),{},{id:e.id})}});case 4:o.refetch(),d.refetch();case 6:case"end":return t.stop()}}),t)}))),children:t?"Remove":"Add"})}})})]})]})},sa=function(){var e=Object(s.useState)(""),t=Object(Tt.a)(e,2),a=t[0],n=t[1],r=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(We,t)}(),c=Object(Tt.a)(r,2),i=c[0],o=c[1],d=o.data,l=o.loading,u=o.error;return(null===d||void 0===d?void 0:d.createCategory)?Object(v.jsx)(j.a,{to:"/categories/".concat(d.createCategory.id,"/edit")}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsx)(_t,{})}),Object(v.jsxs)("div",{children:[Object(v.jsx)(Yt,{id:"name",label:"Name",value:a,onChange:function(e){n(e)}}),Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("button",{disabled:l,className:"".concat(l?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:function(){i({variables:{data:{name:a}}})},children:"Create"}),Object(v.jsx)(Ne,{loading:l}),Object(v.jsx)(ke,{error:!!u,message:null===u||void 0===u?void 0:u.message})]})]})]})},oa=function(e){var t=e.category,a=Object(s.useState)(t.name),n=Object(Tt.a)(a,2),r=n[0],c=n[1],i=Object(s.useState)(),o=Object(Tt.a)(i,2),d=o[0],l=o[1],u=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(st,t)}(),j=Object(Tt.a)(u,2),h=j[0],O=j[1],m=O.loading,p=O.error;return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(Yt,{id:"name",label:"Name",value:r,onChange:function(e){c(e)}}),Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("button",{disabled:m,className:"".concat(m?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:Object(Bt.a)(Ht.a.mark((function e(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(void 0),e.next=3,h({variables:{data:{id:t.id,name:r}}});case 3:e.sent.errors||l("Author updated");case 5:case"end":return e.stop()}}),e)}))),children:"Update"}),Object(v.jsx)("div",{className:"text-red-400 mt-2",children:null===p||void 0===p?void 0:p.message}),Object(v.jsx)("div",{className:"text-green-400 mt-2",children:d})]})]})})},da=function(){var e,t=Kt(),a=$t({variables:{searchQuery:t.get("q")}}),n=a.data,r=a.loading,c=a.error,i=a.refetch,s=a.fetchMore,o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(et,t)}(),d=Object(Tt.a)(o,1)[0],l=Object(j.g)();return c?Object(v.jsx)("div",{children:"something went wrong"}):r?Object(v.jsx)("div",{children:"Loading..."}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsxs)(ye.a,{to:"/collections/create",className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",children:["+"," Create"]})}),Object(v.jsx)(Wt,{name:"collections",data:null===n||void 0===n?void 0:n.collections,onSearch:function(e){t.set("q",e);var a=t.toString();l.push("/collections?".concat(a)),i({searchQuery:t.get("q")})},onLoadMore:function(){s({variables:{skip:null===n||void 0===n?void 0:n.collections.items.length}})},searchQuery:null!==(e=t.get("q"))&&void 0!==e?e:"",actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(prompt("Enter name to delete it","")!==e.name){t.next=5;break}return t.next=4,d({variables:{id:e.id}});case 4:i();case 5:case"end":return t.stop()}}),t)}))),children:"Remove"})}})]})},la=function(){var e,t,a,n,r,c,i=Object(j.i)().collectionID,s=Kt(),o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(wt,t)}({variables:{id:i,searchQuery:s.get("cq")}}),d=It({variables:{searchQuery:s.get("pq")}}),l=jt(),u=Object(Tt.a)(l,1)[0],h=Object(j.g)();return o.error?Object(v.jsx)(ke,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),Object(v.jsxs)("div",{className:"flex items-start",children:[!o.loading||(null===(e=o.data)||void 0===e?void 0:e.collection)?Object(v.jsx)(ja,{collection:o.data.collection}):Object(v.jsx)(Ne,{}),Object(v.jsx)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:Object(v.jsx)(Wt,{limitHeight:!0,name:"products",data:null===(t=o.data)||void 0===t||null===(a=t.collection)||void 0===a?void 0:a.products,onSearch:function(e){s.set("cq",e);var t=s.toString();h.push("/collections/".concat(i,"/edit?").concat(t)),o.refetch({searchQuery:s.get("cq")})},onLoadMore:function(){var e,t;o.fetchMore({variables:{skip:null===(e=o.data)||void 0===e||null===(t=e.collection)||void 0===t?void 0:t.products.items.length}})},searchQuery:null!==(n=s.get("cq"))&&void 0!==n?n:"",actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u({variables:{data:Object(b.a)(Object(b.a)({id:e.id},Zt(e)),{},{collections:Object(ra.a)(e.collections.filter((function(e){return e.id!==i})).map((function(e){return{id:e.id}})))})}});case 4:o.refetch(),d.refetch();case 6:case"end":return t.stop()}}),t)}))),children:"Remove"})}})}),Object(v.jsx)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:Object(v.jsx)(Wt,{limitHeight:!0,name:"products",data:null===(r=d.data)||void 0===r?void 0:r.products,onSearch:function(e){s.set("pq",e);var t=s.toString();h.push("/collections/".concat(i,"/edit?").concat(t)),d.refetch({searchQuery:s.get("pq")})},onLoadMore:function(){var e;d.fetchMore({variables:{skip:null===(e=d.data)||void 0===e?void 0:e.products.items.length}})},searchQuery:null!==(c=s.get("pq"))&&void 0!==c?c:"",highlight:function(e){return!!e.collections.find((function(e){return e.id===i}))},actionComponent:function(e){var t=e.collections.find((function(e){return e.id===i})),a=t?Object(ra.a)(e.collections.filter((function(e){return e.id!==i})).map((function(e){return{id:e.id}}))):[].concat(Object(ra.a)(e.collections.map((function(e){return{id:e.id}}))),[{id:i}]);return Object(v.jsx)("button",{className:t?"text-red-400":"text-blue-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u({variables:{data:Object(b.a)(Object(b.a)({},Zt(Object(b.a)(Object(b.a)({},e),{},{collections:a}))),{},{id:e.id})}});case 4:o.refetch(),d.refetch();case 6:case"end":return t.stop()}}),t)}))),children:t?"Remove":"Add"})}})})]})]})},ua=function(){var e=Object(s.useState)(""),t=Object(Tt.a)(e,2),a=t[0],n=t[1],r=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(Ke,t)}(),c=Object(Tt.a)(r,2),i=c[0],o=c[1],d=o.data,l=o.loading,u=o.error,h=Object(s.useState)(),O=Object(Tt.a)(h,2),m=O[0],p=O[1],x=Object(s.useRef)();return(null===d||void 0===d?void 0:d.createCollection)?Object(v.jsx)(j.a,{to:"/collections/".concat(d.createCollection.id,"/edit")}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsx)(_t,{})}),Object(v.jsxs)("div",{children:[Object(v.jsx)(Yt,{id:"name",label:"Name",value:a,onChange:function(e){n(e)}}),Object(v.jsx)("img",{className:"object-cover w-28 h-28 mt-4",src:x.current,alt:""}),m&&Object(v.jsx)("button",{className:"text-red-400",onClick:function(){x.current=void 0,p(void 0)},children:"Remove"}),Object(v.jsx)("input",{id:"image",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files,a=t&&t[0];if(a){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){x.current=n.result,p(a)},n.onerror=function(){x.current=void 0,p(void 0)}}}}),Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("button",{disabled:l,className:"".concat(l?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:function(){var e=Object(Bt.a)(Ht.a.mark((function e(t){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,i({variables:{data:{name:a},imageFile:m}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Create"}),Object(v.jsx)(Ne,{loading:l}),Object(v.jsx)(ke,{error:!!u,message:null===u||void 0===u?void 0:u.message})]})]})]})},ja=function(e){var t,a=e.collection,n=Object(s.useState)(a.name),r=Object(Tt.a)(n,2),c=r[0],i=r[1],o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(ot,t)}(),d=Object(Tt.a)(o,2),l=d[0],u=d[1],j=u.loading,h=u.error,O=Object(s.useState)(),m=Object(Tt.a)(O,2),p=m[0],x=m[1],g=Object(s.useRef)();return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(Yt,{id:"name",label:"Name",value:c,onChange:function(e){i(e)}}),Object(v.jsx)("img",{className:"object-cover w-28 h-28 mt-4",src:null!==(t=g.current)&&void 0!==t?t:a.image,alt:""}),p&&Object(v.jsx)("button",{className:"text-red-400",onClick:function(){g.current=void 0,x(void 0)},children:"Remove"}),Object(v.jsx)("input",{id:"image",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files,a=t&&t[0];if(a){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){g.current=n.result,x(a)},n.onerror=function(){g.current=void 0,x(void 0)}}}}),Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("button",{disabled:j,className:"".concat(j?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:function(e){e.preventDefault(),l({variables:{data:{id:a.id,name:c}}})},children:"Update"}),Object(v.jsx)("div",{className:"text-red-400 mt-2",children:null===h||void 0===h?void 0:h.message})]})]})})};function ba(){localStorage.removeItem("token"),_a.replace("/login")}var va=function(){return Object(s.useEffect)((function(){ba()}),[]),null},ha=function(e){var t=e.className,a=e.id,n=e.label,r=e.items,c=e.value,i=e.onChange;return Object(v.jsxs)("div",{className:"flex items-center justify-between ".concat(null!==t&&void 0!==t?t:""),children:[Object(v.jsx)("label",{htmlFor:a,children:n}),Object(v.jsx)("select",{className:"ml-4 bg-purple-50 p-2 rounded-lg",name:a,id:a,value:c,onChange:function(e){return i(e.target.selectedIndex)},children:r.map((function(e,t){return Object(v.jsx)("option",{value:t,children:e},t)}))})]})};function Oa(e){return e===xe.Pending?"bg-yellow-200":e===xe.Canceled?"bg-gray-200":e===xe.Failed?"bg-red-200":e===xe.Delivered?"bg-green-200":e===xe.Delivering?"bg-blue-200":"bg-purple-200"}var ma=function(){var e=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(At,t)}({variables:{order:[{field:"createdAt",order:pe.Desc}]}}),t=e.data,a=(e.error,e.loading,e.refetch),n=e.fetchMore;return Object(s.useEffect)((function(){var e=setInterval((function(){var e=(null===t||void 0===t?void 0:t.orders.items.length)||0;a({take:e})}),2e3);return function(){return clearInterval(e)}}),[null===t||void 0===t?void 0:t.orders.items.length]),Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"All Orders"}),Object(v.jsx)("div",{className:"flex mb-4 mt-2 rounded-lg",children:Object.keys(xe).map((function(e){return Object(v.jsx)("div",{className:"h-1 w-12 ".concat(Oa(e))})}))}),null===t||void 0===t?void 0:t.orders.items.map((function(e){return Object(v.jsx)(pa,{order:e})})),(null===t||void 0===t?void 0:t.orders.hasMore)?Object(v.jsx)("div",{className:"text-center mt-2",children:Object(v.jsx)("button",{className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",onClick:function(){n({variables:{skip:t.orders.items.length}})},children:"Load more"})}):null]})},pa=function(e){var t,a,n,r=e.order,c=Object(s.useState)(r.status),i=Object(Tt.a)(c,2),o=i[0],d=i[1],l=lt(),u=Object(Tt.a)(l,2),j=u[0],b=u[1],h=b.loading,O=(b.error,Object(s.useState)(r.status)),m=Object(Tt.a)(O,2),p=m[0],x=m[1],g=Object.keys(xe);return Object(s.useEffect)((function(){d(r.status),x(r.status)}),[r.id,r.status]),Object(v.jsxs)("div",{className:"flex items-center justify-between",children:[Object(v.jsxs)("div",{className:"flex-1 p-2 rounded-lg mb-4 ".concat(Oa(p)," mr-4"),children:[Object(v.jsxs)(ye.a,{to:"/orders/".concat(r.id,"/edit"),className:"text-blue-600",children:["#",r.orderNumber]}),Object(v.jsxs)("div",{children:["User: ",r.user.name]}),Object(v.jsxs)("div",{children:["Province: ",null!==(t=r.province)&&void 0!==t?t:r.user.province]}),Object(v.jsxs)("div",{children:["Address: ",null!==(a=r.address)&&void 0!==a?a:r.user.address]}),Object(v.jsxs)("div",{children:["Phone: ",null!==(n=r.phone)&&void 0!==n?n:r.user.phone]}),Object(v.jsxs)("div",{className:"flex items-center mb-4 overflow-hidden",children:[Object(v.jsx)(ha,{id:"status",label:"Status",items:g,value:p?g.indexOf(p):void 0,onChange:function(e){x(g[e])}}),Object(v.jsx)("button",{disabled:h||o===p,className:"".concat(h?"bg-gray-400":o!==p?"bg-purple-400 hover:bg-purple-600":"bg-gray-600"," p-2 text-white rounded-lg ml-4"),onClick:Object(Bt.a)(Ht.a.mark((function e(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({variables:{data:{id:r.id,status:p}}});case 2:e.sent.errors||d(p);case 4:case"end":return e.stop()}}),e)}))),children:"Update"})]})]}),Object(v.jsx)(ye.a,{className:"text-purple-400 hover:text-red-400",to:"/orders/".concat(r.id,"/edit"),children:"Details ->"})]})},xa=function(){var e=Object(j.i)().orderID,t=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(qt,t)}({variables:{id:e}}),a=t.loading,n=t.data,c=t.error;return Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),(null===n||void 0===n?void 0:n.order)&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ga,{order:n.order}),Object(v.jsxs)(ye.a,{to:"/orders/".concat(e,"/edit"),className:"text-blue-600 mt-4",children:["Order #",n.order.orderNumber]}),Object(v.jsxs)("div",{className:"mt-2",children:["User: ",n.order.user.name]}),Object(v.jsxs)("div",{children:["Phone: ",n.order.phone||n.order.user.phone]}),Object(v.jsxs)("div",{children:["Province: ",n.order.province||n.order.user.province]}),Object(v.jsxs)("div",{children:["Address: ",n.order.address||n.order.user.address]}),Object(v.jsxs)("div",{children:["Ordered on:"," ",Object(v.jsx)("b",{children:r()(n.order.createdAt).format("dddd YYYY-MM-DD HH:mma")})," ",r()(n.order.createdAt).fromNow()]}),Object(v.jsx)("h1",{className:"mt-4",children:"Purchases"}),Object(v.jsx)("div",{className:"h-1 bg-yellow-200 rounded-lg mt-2 mb-4"}),Object(v.jsxs)("div",{children:[n.order.purchases.items.map((function(e){return Object(v.jsxs)("div",{className:"flex justify-between flex-1 p-2 rounded-lg mb-4 bg-purple-100 mr-4",children:[Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{children:["Product: ",e.product.name]}),Object(v.jsxs)("div",{children:["Quantity: ",e.quantity]}),Object(v.jsxs)("div",{children:["piece price: ",e.product.price]}),Object(v.jsxs)("div",{children:["Total price: ",Object(v.jsx)("b",{children:e.product.price*e.quantity})]})]}),Object(v.jsx)("div",{children:Object(v.jsx)("img",{className:"ml-4 object-cover w-28 h-40 rounded-lg bg-yellow-100",src:e.product.image,alt:""})})]})})),Object(v.jsxs)("div",{children:["Total:"," ",Object(v.jsx)("b",{children:n.order.purchases.items.reduce((function(e,t){return t.product.price*t.quantity+e}),0)})," ","IQD"]})]})]}),Object(v.jsx)(Ne,{loading:a}),Object(v.jsx)(ke,{error:!!c,message:null===c||void 0===c?void 0:c.message})]})},ga=function(e){var t=e.order,a=Object(s.useState)(t.status),n=Object(Tt.a)(a,2),r=n[0],c=n[1],i=Object(s.useState)(),o=Object(Tt.a)(i,2),d=o[0],l=o[1],u=lt(),j=Object(Tt.a)(u,2),b=j[0],h=j[1],O=h.loading,m=h.error,p=Object.keys(xe);return Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)(ha,{id:"status",className:"mb-4 ".concat(Oa(r)," rounded-lg pl-2"),label:"Status",items:p,value:r?p.indexOf(r):void 0,onChange:function(e){c(p[e])}}),Object(v.jsx)("button",{disabled:O,className:"".concat(O?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:Object(Bt.a)(Ht.a.mark((function e(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(void 0),e.next=3,b({variables:{data:{id:t.id,status:r}}});case 3:e.sent.errors||l("Order updated");case 5:case"end":return e.stop()}}),e)}))),children:"Update"}),Object(v.jsx)("div",{className:"text-red-400 mt-2",children:null===m||void 0===m?void 0:m.message}),Object(v.jsx)("div",{className:"text-green-400 mt-2",children:d})]})})})};function fa(){var e,t=Kt(),a=It({variables:{searchQuery:t.get("q")}}),n=a.data,r=a.error,c=a.fetchMore,i=a.refetch,s=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(tt,t)}(),o=Object(Tt.a)(s,1)[0];return r?Object(v.jsx)("div",{children:"Something went wrong"}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsxs)(ye.a,{to:"/products/create",className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",children:["+"," Create"]})}),Object(v.jsx)(Wt,{name:"products",data:null===n||void 0===n?void 0:n.products,onSearch:function(e){t.set("q",e);var a=t.toString();_a.push("/products?".concat(a)),i({searchQuery:t.get("q")})},onLoadMore:function(){c({variables:{skip:null===n||void 0===n?void 0:n.products.items.length}})},searchQuery:null!==(e=t.get("q"))&&void 0!==e?e:"",actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(prompt("Enter product name to delete it","")!==e.name){t.next=5;break}return t.next=4,o({variables:{id:e.id}});case 4:i();case 5:case"end":return t.stop()}}),t)}))),children:"Remove"})}})]})}function ya(){var e=Object(j.j)().params.productID,t=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(Qt,t)}({variables:{id:e}}),a=t.data,n=t.loading,r=t.error,c=jt(),i=Object(Tt.a)(c,2),s=i[0],o=i[1];return r?Object(v.jsx)(ke,{}):n?Object(v.jsx)(Ne,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),Object(v.jsx)(wa,{product:a.product,loading:o.loading,error:o.error,onSubmit:function(t,a){s({variables:{data:Object(b.a)(Object(b.a)({},t),{},{id:e}),imageFile:a}})}})]})}function ka(){var e=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(Je,t)}(),t=Object(Tt.a)(e,2),a=t[0],n=t[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),Object(v.jsx)(wa,{loading:n.loading,error:n.error,onSubmit:function(e,t){a({variables:{data:e,imageFile:t}})}})]})}function Na(e,t){var a,n,r,c;switch(t.type){case"name":return Object(b.a)(Object(b.a)({},e),{},{name:t.payload});case"overview":return Object(b.a)(Object(b.a)({},e),{},{overview:t.payload});case"image":return Object(b.a)(Object(b.a)({},e),{},{image:t.payload});case"language":return Object(b.a)(Object(b.a)({},e),{},{language:t.payload});case"status":return Object(b.a)(Object(b.a)({},e),{},{status:t.payload});case"pages":return Object(b.a)(Object(b.a)({},e),{},{pages:t.payload});case"price":return Object(b.a)(Object(b.a)({},e),{},{price:t.payload});case"publishedAt":return Object(b.a)(Object(b.a)({},e),{},{publishedAt:t.payload});case"removeCategory":return Object(b.a)(Object(b.a)({},e),{},{categories:null===e||void 0===e||null===(a=e.categories)||void 0===a?void 0:a.filter((function(e){return e.id!==t.payload.id}))});case"addCategory":return Object(b.a)(Object(b.a)({},e),{},{categories:[].concat(Object(ra.a)(null!==(n=null===e||void 0===e?void 0:e.categories)&&void 0!==n?n:[]),[t.payload])});case"removeCollection":return Object(b.a)(Object(b.a)({},e),{},{collections:null===e||void 0===e||null===(r=e.collections)||void 0===r?void 0:r.filter((function(e){return e.id!==t.payload.id}))});case"addCollection":return Object(b.a)(Object(b.a)({},e),{},{collections:[].concat(Object(ra.a)(null!==(c=null===e||void 0===e?void 0:e.collections)&&void 0!==c?c:[]),[t.payload])});case"author":return Object(b.a)(Object(b.a)({},e),{},{author:t.payload});case"publisher":return Object(b.a)(Object(b.a)({},e),{},{publisher:t.payload});default:return e}}var wa=function(e){var t,a,n,c,i,o,d,l,u,j,b,h,O,m,p,x=e.product,g=e.onSubmit,f=e.loading,y=e.error,k=Object(s.useReducer)(Na,null!==x&&void 0!==x?x:{}),N=Object(Tt.a)(k,2),w=N[0],C=N[1],$=Object(s.useState)(),S=Object(Tt.a)($,2),q=S[0],A=S[1],Q=Object(s.useRef)(),P=Object.keys(ge),I=["ar","en"],M=Kt(),R=kt({variables:{searchQuery:M.get("catq")}}),U=$t({variables:{searchQuery:M.get("colq")}}),D=ft({variables:{searchQuery:M.get("autq")}}),L=Ut({variables:{searchQuery:M.get("pubq")}});return Object(v.jsxs)("div",{className:"flex",children:[Object(v.jsxs)("div",{className:"flex flex-col",children:[Object(v.jsx)(Yt,{id:"name",label:"Name",value:w.name,onChange:function(e){C({type:"name",payload:e})}}),Object(v.jsx)(Yt,{id:"overview",className:"mt-4",label:"Overview",multiline:!0,value:w.overview,onChange:function(e){C({type:"overview",payload:e})}}),Object(v.jsx)(Yt,{id:"price",className:"mt-4",label:"Price",value:null===(t=w.price)||void 0===t?void 0:t.toString(),onChange:function(e){var t=parseInt(e);C({type:"price",payload:isNaN(t)?0:t})}}),Object(v.jsx)(Yt,{id:"pages",className:"mt-4",label:"Pages",value:null===(a=w.pages)||void 0===a?void 0:a.toString(),onChange:function(e){var t=parseInt(e);C({type:"pages",payload:isNaN(t)?null:t})}}),Object(v.jsx)(ha,{id:"status",className:"mt-4",label:"Status",items:P,value:w.status?P.indexOf(w.status):void 0,onChange:function(e){C({type:"status",payload:P[e]})}}),Object(v.jsx)(ha,{id:"status",className:"mt-4",label:"Language",items:I,value:w.language?I.indexOf(w.language):void 0,onChange:function(e){C({type:"language",payload:I[e]})}}),Object(v.jsx)("img",{className:"object-cover w-28 h-28 mt-4",src:null!==(n=Q.current)&&void 0!==n?n:w.image,alt:""}),Object(v.jsx)("input",{id:"image",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files,a=t&&t[0];if(a){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){Q.current=n.result,A(a)},n.onerror=function(){Q.current=void 0,A(void 0)}}else Q.current=void 0,A(void 0)}}),Object(v.jsx)(Yt,{id:"publishedAt",className:"mt-4",label:"Published At",type:"date",value:r()(w.publishedAt).format("YYYY-MM-DD"),onChange:function(e){C({type:"publishedAt",payload:r()(e).toDate()})}}),Object(v.jsx)("div",{className:"text-center mt-4",children:Object(v.jsx)("button",{disabled:f,className:"".concat(f?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:function(){g(Zt(w),q)},children:"Submit"})}),Object(v.jsx)(ke,{error:!!y,message:null===y||void 0===y?void 0:y.message})]}),Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"flex items-start",children:[Object(v.jsxs)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:[Object(v.jsx)("div",{className:"mb-2",children:"Product Categories"}),Object(v.jsx)(Wt,{limitHeight:!0,name:"categories",searchQuery:"",onLoadMore:function(){},onSearch:function(){},data:{items:null!==(c=w.categories)&&void 0!==c?c:[],total:0,hasMore:!1},actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:function(){C({type:"removeCategory",payload:e})},children:"Remove"})}})]}),Object(v.jsxs)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:[Object(v.jsx)("div",{className:"mb-2",children:"All Categories"}),Object(v.jsx)(Wt,{limitHeight:!0,name:"categories",data:null===(i=R.data)||void 0===i?void 0:i.categories,onSearch:function(e){M.set("catq",e);var t=M.toString();_a.push("/products/".concat(w.id,"/edit?").concat(t)),R.refetch({searchQuery:M.get("catq")})},onLoadMore:function(){var e;R.fetchMore({variables:{skip:null===(e=R.data)||void 0===e?void 0:e.categories.items.length}})},searchQuery:null!==(o=M.get("catq"))&&void 0!==o?o:"",highlight:function(e){var t;return!!(null===(t=w.categories)||void 0===t?void 0:t.find((function(t){return t.id===e.id})))},actionComponent:function(e){var t,a=null===(t=w.categories)||void 0===t?void 0:t.find((function(t){return t.id===e.id}));return Object(v.jsx)("button",{className:a?"text-red-400":"text-blue-400",onClick:function(){C({type:a?"removeCategory":"addCategory",payload:e})},children:a?"Remove":"Add"})}})]})]}),Object(v.jsxs)("div",{className:"flex items-start mt-4",children:[Object(v.jsxs)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:[Object(v.jsx)("div",{className:"mb-2",children:"Product Collections"}),Object(v.jsx)(Wt,{limitHeight:!0,name:"collections",searchQuery:"",onLoadMore:function(){},onSearch:function(){},data:{items:null!==(d=w.collections)&&void 0!==d?d:[],total:0,hasMore:!1},actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:function(){C({type:"removeCollection",payload:e})},children:"Remove"})}})]}),Object(v.jsxs)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:[Object(v.jsx)("div",{className:"mb-2",children:"All Collections"}),Object(v.jsx)(Wt,{limitHeight:!0,name:"collections",data:null===(l=U.data)||void 0===l?void 0:l.collections,onSearch:function(e){M.set("colq",e);var t=M.toString();_a.push("/products/".concat(w.id,"/edit?").concat(t)),U.refetch({searchQuery:M.get("colq")})},onLoadMore:function(){var e;R.fetchMore({variables:{skip:null===(e=U.data)||void 0===e?void 0:e.collections.items.length}})},searchQuery:null!==(u=M.get("colq"))&&void 0!==u?u:"",highlight:function(e){var t;return!!(null===(t=w.collections)||void 0===t?void 0:t.find((function(t){return t.id===e.id})))},actionComponent:function(e){var t,a=null===(t=w.collections)||void 0===t?void 0:t.find((function(t){return t.id===e.id}));return Object(v.jsx)("button",{className:a?"text-red-400":"text-blue-400",onClick:function(){C({type:a?"removeCollection":"addCollection",payload:e})},children:a?"Remove":"Add"})}})]})]}),Object(v.jsxs)("div",{className:"flex items-start mt-4",children:[Object(v.jsxs)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:[Object(v.jsx)("div",{className:"mb-2",children:"Product Author"}),Object(v.jsx)("div",{children:null===(j=w.author)||void 0===j?void 0:j.name})]}),Object(v.jsxs)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:[Object(v.jsx)("div",{className:"mb-2",children:"All Authors"}),Object(v.jsx)(Wt,{limitHeight:!0,name:"publishers",data:null===(b=D.data)||void 0===b?void 0:b.authors,onSearch:function(e){M.set("autq",e);var t=M.toString();_a.push("/products/".concat(w.id,"/edit?").concat(t)),D.refetch({searchQuery:M.get("autq")})},onLoadMore:function(){var e;R.fetchMore({variables:{skip:null===(e=D.data)||void 0===e?void 0:e.authors.items.length}})},searchQuery:null!==(h=M.get("autq"))&&void 0!==h?h:"",highlight:function(e){var t;return(null===(t=w.author)||void 0===t?void 0:t.id)===e.id},actionComponent:function(e){var t,a=(null===(t=w.author)||void 0===t?void 0:t.id)===e.id;return Object(v.jsx)("button",{className:a?"text-gray-400":"text-blue-400",onClick:function(){C({type:"author",payload:e})},children:"Set"})}})]})]}),Object(v.jsxs)("div",{className:"flex items-start mt-4",children:[Object(v.jsxs)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:[Object(v.jsx)("div",{className:"mb-2",children:"Product Publisher"}),Object(v.jsx)("div",{children:null===(O=w.publisher)||void 0===O?void 0:O.name})]}),Object(v.jsxs)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:[Object(v.jsx)("div",{className:"mb-2",children:"All Publishers"}),Object(v.jsx)(Wt,{limitHeight:!0,name:"publishers",data:null===(m=L.data)||void 0===m?void 0:m.publishers,onSearch:function(e){M.set("pubq",e);var t=M.toString();_a.push("/products/".concat(w.id,"/edit?").concat(t)),D.refetch({searchQuery:M.get("pubq")})},onLoadMore:function(){var e;R.fetchMore({variables:{skip:null===(e=D.data)||void 0===e?void 0:e.authors.items.length}})},searchQuery:null!==(p=M.get("autq"))&&void 0!==p?p:"",highlight:function(e){var t;return(null===(t=w.publisher)||void 0===t?void 0:t.id)===e.id},actionComponent:function(e){var t,a=(null===(t=w.publisher)||void 0===t?void 0:t.id)===e.id;return Object(v.jsx)("button",{className:a?"text-gray-400":"text-blue-400",onClick:function(){C({type:"publisher",payload:e})},children:"Set"})}})]})]})]})]})},Ca=function(){var e,t=Kt(),a=Object(j.g)(),n=Ut({variables:{searchQuery:t.get("q")}}),r=n.data,c=n.error,i=n.fetchMore,s=n.refetch,o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(at,t)}(),d=Object(Tt.a)(o,1)[0];return c?Object(v.jsx)("div",{children:"Something went wrong"}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsxs)(ye.a,{to:"/publishers/create",className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",children:["+"," Create"]})}),Object(v.jsx)(Wt,{name:"publishers",data:null===r||void 0===r?void 0:r.publishers,onSearch:function(e){t.set("q",e);var n=t.toString();a.push("/publishers?".concat(n)),s({searchQuery:t.get("q")})},onLoadMore:function(){i({variables:{skip:null===r||void 0===r?void 0:r.publishers.items.length}})},searchQuery:null!==(e=t.get("q"))&&void 0!==e?e:"",actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(prompt("Enter name to delete it","")!==e.name){t.next=5;break}return t.next=4,d({variables:{id:e.id}});case 4:s();case 5:case"end":return t.stop()}}),t)}))),children:"Remove"})}})]})},$a=function(){var e,t,a,n,r,c,i=Object(j.i)().publisherID,s=Kt(),o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(Mt,t)}({variables:{id:i,searchQuery:s.get("cq")}}),d=It({variables:{searchQuery:s.get("pq")}}),l=jt(),u=Object(Tt.a)(l,1)[0],h=Object(j.g)();return o.error?Object(v.jsx)(ke,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),Object(v.jsxs)("div",{className:"flex items-start",children:[!o.loading||(null===(e=o.data)||void 0===e?void 0:e.publisher)?Object(v.jsx)(qa,{publisher:o.data.publisher}):Object(v.jsx)(Ne,{}),Object(v.jsx)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:Object(v.jsx)(Wt,{limitHeight:!0,name:"products",data:null===(t=o.data)||void 0===t||null===(a=t.publisher)||void 0===a?void 0:a.products,onSearch:function(e){s.set("cq",e);var t=s.toString();h.push("/publishers/".concat(i,"/edit?").concat(t)),o.refetch({searchQuery:s.get("cq")})},onLoadMore:function(){var e,t;o.fetchMore({variables:{skip:null===(e=o.data)||void 0===e||null===(t=e.publisher)||void 0===t?void 0:t.products.items.length}})},searchQuery:null!==(n=s.get("cq"))&&void 0!==n?n:"",actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u({variables:{data:Object(b.a)(Object(b.a)({id:e.id},Zt(e)),{},{publisher:null})}});case 4:o.refetch(),d.refetch();case 6:case"end":return t.stop()}}),t)}))),children:"Remove"})}})}),Object(v.jsx)("div",{className:"bg-yellow-50 rounded-lg ml-4",children:Object(v.jsx)(Wt,{limitHeight:!0,name:"products",data:null===(r=d.data)||void 0===r?void 0:r.products,onSearch:function(e){s.set("pq",e);var t=s.toString();h.push("/publishers/".concat(i,"/edit?").concat(t)),d.refetch({searchQuery:s.get("pq")})},onLoadMore:function(){var e;d.fetchMore({variables:{skip:null===(e=d.data)||void 0===e?void 0:e.products.items.length}})},searchQuery:null!==(c=s.get("pq"))&&void 0!==c?c:"",highlight:function(e){var t;return(null===(t=e.publisher)||void 0===t?void 0:t.id)===i},actionComponent:function(e){var t,a=(null===(t=e.publisher)||void 0===t?void 0:t.id)===i;return Object(v.jsx)("button",{className:a?"text-red-400":"text-blue-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u({variables:{data:Object(b.a)(Object(b.a)({},Zt(Object(b.a)(Object(b.a)({},e),{},{publisher:a?void 0:{id:i}}))),{},{id:e.id})}});case 4:o.refetch(),d.refetch();case 6:case"end":return t.stop()}}),t)}))),children:a?"Remove":"Add"})}})})]})]})},Sa=function(){var e=Object(s.useState)(""),t=Object(Tt.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(),c=Object(Tt.a)(r,2),i=c[0],o=c[1],d=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(ze,t)}(),l=Object(Tt.a)(d,2),u=l[0],h=l[1],O=h.data,m=h.loading,p=h.error;return(null===O||void 0===O?void 0:O.createPublisher)?Object(v.jsx)(j.a,{to:"/publishers/".concat(O.createPublisher.id,"/edit")}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsx)(_t,{})}),Object(v.jsxs)("div",{children:[Object(v.jsx)(Yt,{id:"name",label:"Name",value:a,onChange:function(e){n(e)}}),Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("button",{disabled:m,className:"".concat(m?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:Object(Bt.a)(Ht.a.mark((function e(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(void 0),e.next=3,u({variables:{data:{name:a}}});case 3:e.sent.errors||o("Publisher created");case 5:case"end":return e.stop()}}),e)}))),children:"Create"}),Object(v.jsx)(Ne,{loading:m}),Object(v.jsx)(ke,{error:!!p,message:null===p||void 0===p?void 0:p.message}),Object(v.jsx)("div",{className:"text-green-400 mt-2",children:i})]})]})]})},qa=function(e){var t=e.publisher,a=Object(s.useState)(t.name),n=Object(Tt.a)(a,2),r=n[0],c=n[1],i=Object(s.useState)(),o=Object(Tt.a)(i,2),d=o[0],l=o[1],u=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(bt,t)}(),j=Object(Tt.a)(u,2),h=j[0],O=j[1],m=O.loading,p=O.error;return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(Yt,{id:"name",label:"Name",value:r,onChange:function(e){c(e)}}),Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("button",{disabled:m,className:"".concat(m?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:Object(Bt.a)(Ht.a.mark((function e(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(void 0),e.next=3,h({variables:{data:{id:t.id,name:r}}});case 3:e.sent.errors||l("Publisher updated");case 5:case"end":return e.stop()}}),e)}))),children:"Update"}),Object(v.jsx)("div",{className:"text-red-400 mt-2",children:null===p||void 0===p?void 0:p.message}),Object(v.jsx)("div",{className:"text-green-400 mt-2",children:d})]})]})})};function Aa(e){return e===fe.Pending?"bg-yellow-200":e===fe.Failed?"bg-red-200":e===fe.Success?"bg-green-200":e===fe.Processing?"bg-blue-200":"bg-purple-200"}var Qa=function(){var e=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(Lt,t)}({variables:{order:[{field:"createdAt",order:pe.Desc}]}}),t=e.data,a=(e.error,e.loading,e.refetch),n=e.fetchMore;return Object(s.useEffect)((function(){var e=setInterval((function(){var e=(null===t||void 0===t?void 0:t.requests.items.length)||0;a({take:e})}),2e3);return function(){return clearInterval(e)}}),[null===t||void 0===t?void 0:t.requests.items.length]),Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"All User Requests"}),Object(v.jsx)("div",{className:"flex mb-4 mt-2 rounded-lg",children:Object.keys(fe).map((function(e){return Object(v.jsx)("div",{className:"h-1 w-12 ".concat(Aa(e))})}))}),null===t||void 0===t?void 0:t.requests.items.map((function(e){return Object(v.jsx)(Pa,{userRequest:e},e.id)})),(null===t||void 0===t?void 0:t.requests.hasMore)?Object(v.jsx)("div",{className:"text-center mt-2",children:Object(v.jsx)("button",{className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",onClick:function(){n({variables:{skip:t.requests.items.length}})},children:"Load more"})}):null]})},Pa=function(e){var t=e.userRequest,a=Object(s.useState)(t.status),n=Object(Tt.a)(a,2),r=n[0],c=n[1],i=ht(),o=Object(Tt.a)(i,2),d=o[0],l=o[1],u=l.loading,j=(l.error,Object(s.useState)(t.status)),b=Object(Tt.a)(j,2),h=b[0],O=b[1],m=Object.keys(fe);return Object(s.useEffect)((function(){c(t.status),O(t.status)}),[t.id,t.status]),Object(v.jsxs)("div",{className:"flex-1 p-2 rounded-lg mb-4 ".concat(Aa(h)," mr-4 max-w-xl"),children:[Object(v.jsxs)("div",{children:["User: ",t.user.name]}),Object(v.jsxs)("div",{children:["Phone: ",t.user.phone]}),Object(v.jsxs)("div",{children:["Province:"," ",t.user.province||Object(v.jsx)("span",{className:"text-red-400",children:"unspecified"})]}),Object(v.jsxs)("div",{children:["Request content: ",Object(v.jsx)("b",{children:t.content})]}),Object(v.jsxs)("div",{className:"my-4 flex items-center overflow-hidden",children:[Object(v.jsx)(ha,{id:"status",label:"Status",items:m,value:h?m.indexOf(h):void 0,onChange:function(e){O(m[e])}}),Object(v.jsx)("button",{disabled:u||r===h,className:"".concat(u?"bg-gray-400":r!==h?"bg-purple-400 hover:bg-purple-600":"bg-gray-600"," p-2 text-white rounded-lg ml-4"),onClick:Object(Bt.a)(Ht.a.mark((function e(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({variables:{data:{id:t.id,content:t.content,status:h}}});case 2:e.sent.errors||c(h);case 4:case"end":return e.stop()}}),e)}))),children:"Update"})]})]})},Ia=function(){var e,t=Kt(),a=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(Ft,t)}({variables:{searchQuery:t.get("q")}}),n=a.data,r=a.loading,c=a.error,i=a.refetch,s=a.fetchMore,o=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(nt,t)}(),d=Object(Tt.a)(o,1)[0],l=Object(j.g)();return c?Object(v.jsx)("div",{children:"something went wrong"}):r?Object(v.jsx)("div",{children:"Loading..."}):Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"mb-4",children:Object(v.jsxs)(ye.a,{to:"/users/create",className:"text-purple-400 hover:bg-purple-200 hover:text-black p-2 rounded",children:["+"," Create"]})}),Object(v.jsx)(Wt,{name:"users",data:null===n||void 0===n?void 0:n.users,onSearch:function(e){t.set("q",e);var a=t.toString();l.push("/users?".concat(a)),i({searchQuery:t.get("q")})},onLoadMore:function(){s({variables:{skip:null===n||void 0===n?void 0:n.users.items.length}})},searchQuery:null!==(e=t.get("q"))&&void 0!==e?e:"",actionComponent:function(e){return Object(v.jsx)("button",{className:"text-red-400",onClick:Object(Bt.a)(Ht.a.mark((function t(){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(prompt("Enter name","")!==e.name){t.next=5;break}return t.next=4,d({variables:{id:e.id}});case 4:i();case 5:case"end":return t.stop()}}),t)}))),children:"Remove"})}})]})},Ma=function(){var e=Object(j.i)().userID,t=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(Dt,t)}({variables:{id:e}}),a=t.data,n=t.loading,r=t.error,c=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(Ot,t)}(),i=Object(Tt.a)(c,2),o=i[0],d=i[1],l=Object(s.useState)(),u=Object(Tt.a)(l,2),h=u[0],O=u[1];return r?Object(v.jsx)(ke,{}):Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),!n||(null===a||void 0===a?void 0:a.user)?Object(v.jsx)(La,{user:a.user,loading:d.loading,error:d.error,onSubmit:function(){var t=Object(Bt.a)(Ht.a.mark((function t(a){return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(void 0),t.next=3,o({variables:{data:Object(b.a)(Object(b.a)({},a),{},{id:e})}});case 3:t.sent.errors||O("User updated");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}):Object(v.jsx)(Ne,{}),Object(v.jsx)("div",{className:"text-green-400",children:h})]})},Ra=function(){var e=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(Ge,t)}(),t=Object(Tt.a)(e,2),a=t[0],n=t[1],r=n.loading,c=n.error,i=Object(s.useState)(),o=Object(Tt.a)(i,2),d=o[0],l=o[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)(_t,{}),Object(v.jsx)(La,{loading:r,error:c,onSubmit:function(){var e=Object(Bt.a)(Ht.a.mark((function e(t){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(void 0),e.next=3,a({variables:{data:t}});case 3:e.sent.errors||l("user created");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(v.jsx)("div",{className:"text-green-400",children:d})]})};function Ua(e,t){switch(t.type){case"name":return Object(b.a)(Object(b.a)({},e),{},{name:t.payload});case"phone":return Object(b.a)(Object(b.a)({},e),{},{phone:t.payload});case"password":return Object(b.a)(Object(b.a)({},e),{},{password:t.payload});case"province":return Object(b.a)(Object(b.a)({},e),{},{province:t.payload});case"address":return Object(b.a)(Object(b.a)({},e),{},{address:t.payload});case"confirmed":return Object(b.a)(Object(b.a)({},e),{},{confirmed:t.payload});default:return e}}var Da,La=function(e){var t,a,n,r=e.user,c=e.onSubmit,i=e.error,o=e.loading,d=Object(s.useReducer)(Ua,r?Object(b.a)(Object(b.a)({},r),{},{confirmed:null===r.confirmed||void 0===r.confirmed||r.confirmed}):{}),l=Object(Tt.a)(d,2),u=l[0],j=l[1];return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(Yt,{className:"mb-4",id:"name",label:"Name",value:u.name,onChange:function(e){j({type:"name",payload:e})}}),Object(v.jsx)(Yt,{className:"mb-4",id:"phone",label:"phone",value:u.phone,onChange:function(e){j({type:"phone",payload:e})}}),Object(v.jsx)(Yt,{className:"mb-4",id:"province",label:"province",value:null!==(t=u.province)&&void 0!==t?t:"",onChange:function(e){j({type:"province",payload:e})}}),Object(v.jsx)(Yt,{className:"mb-4",id:"address",label:"address",value:null!==(a=u.address)&&void 0!==a?a:"",onChange:function(e){j({type:"address",payload:e})}}),Object(v.jsx)(Yt,{className:"mb-4",id:"password",label:"Password",value:null!==(n=u.password)&&void 0!==n?n:"",onChange:function(e){j({type:"password",payload:e})}}),Object(v.jsx)("label",{className:"mr-4",htmlFor:"confirmed",children:"Confirmed"}),Object(v.jsx)("input",{className:"mb-4",type:"checkbox",value:"confirmed",checked:u.confirmed,onChange:function(e){j({type:"confirmed",payload:e.target.checked})}}),Object(v.jsxs)("div",{className:"text-center mt-4",children:[Object(v.jsx)("button",{disabled:o,className:"".concat(o?"bg-gray-400":"bg-purple-400 hover:bg-purple-600"," p-2 text-white rounded"),onClick:function(){var e;if(!u.name||!u.phone)throw new window.Error("missing required fields");c({name:u.name,password:null!==(e=u.password)&&void 0!==e?e:void 0,phone:u.phone,address:u.address,province:u.province,confirmed:u.confirmed})},children:"Submit"}),Object(v.jsx)("div",{className:"text-red-400 mt-2",children:null===i||void 0===i?void 0:i.message})]})]})})},Fa=function(){return Object(v.jsxs)("div",{className:"flex",children:[Object(v.jsx)(we,{}),Object(v.jsx)("div",{className:"ml-6 p-4",children:Object(v.jsxs)(j.d,{children:[Object(v.jsx)(h,{path:"/orders/:orderID/edit",children:Object(v.jsx)(xa,{})}),Object(v.jsx)(h,{path:"/orders",children:Object(v.jsx)(ma,{})}),Object(v.jsx)(h,{path:"/requests",children:Object(v.jsx)(Qa,{})}),Object(v.jsx)(h,{path:"/users/:userID/edit",children:Object(v.jsx)(Ma,{})}),Object(v.jsx)(h,{path:"/users/create",children:Object(v.jsx)(Ra,{})}),Object(v.jsx)(h,{path:"/users",children:Object(v.jsx)(Ia,{})}),Object(v.jsx)(h,{path:"/admins/:adminID/edit",children:Object(v.jsx)(zt,{})}),Object(v.jsx)(h,{path:"/admins/create",children:Object(v.jsx)(Gt,{})}),Object(v.jsx)(h,{path:"/admins",children:Object(v.jsx)(Jt,{})}),Object(v.jsx)(h,{path:"/publishers/:publisherID/edit",children:Object(v.jsx)($a,{})}),Object(v.jsx)(h,{path:"/publishers/create",children:Object(v.jsx)(Sa,{})}),Object(v.jsx)(h,{path:"/publishers",children:Object(v.jsx)(Ca,{})}),Object(v.jsx)(h,{path:"/authors/:authorID/edit",children:Object(v.jsx)(ta,{})}),Object(v.jsx)(h,{path:"/authors/create",children:Object(v.jsx)(aa,{})}),Object(v.jsx)(h,{path:"/authors",children:Object(v.jsx)(ea,{})}),Object(v.jsx)(h,{path:"/collections/:collectionID/edit",children:Object(v.jsx)(la,{})}),Object(v.jsx)(h,{path:"/collections/create",children:Object(v.jsx)(ua,{})}),Object(v.jsx)(h,{path:"/collections",children:Object(v.jsx)(da,{})}),Object(v.jsx)(h,{path:"/categories/create",children:Object(v.jsx)(sa,{})}),Object(v.jsx)(h,{path:"/categories/:categoryID/edit",children:Object(v.jsx)(ia,{})}),Object(v.jsx)(h,{path:"/categories",children:Object(v.jsx)(ca,{})}),Object(v.jsx)(h,{path:"/products/:productID/edit",children:Object(v.jsx)(ya,{})}),Object(v.jsx)(h,{path:"/products/create",children:Object(v.jsx)(ka,{})}),Object(v.jsx)(h,{path:"/products",children:Object(v.jsx)(fa,{})}),Object(v.jsx)(h,{path:"/logout",children:Object(v.jsx)(va,{})}),Object(v.jsx)(h,{path:"/",children:Object(v.jsx)(Ea,{})})]})})]})},Ea=function(){var e=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return Ae.a(St,t)}(),t=e.data,a=e.loading,n=e.error;return Object(v.jsxs)("div",{children:[Object(v.jsx)(Ne,{loading:a}),Object(v.jsx)(ke,{error:!!n,message:null===n||void 0===n?void 0:n.message}),t&&Object(v.jsxs)("div",{className:"flex flex-wrap",children:[Object(v.jsx)(Ha,{name:"Users",total:t.users.total,color:"red-400",className:"mr-6 mb-6"}),Object(v.jsx)(Ha,{name:"Products",total:t.products.total,color:"blue-400",className:"mr-6 mb-6"}),Object(v.jsx)(Ha,{name:"Orders",total:t.orders.total,color:"yellow-400",className:"mr-6 mb-6"}),Object(v.jsx)(Ha,{name:"Requests",total:t.requests.total,color:"green-400",className:"mr-6 mb-6"}),Object(v.jsx)(Ha,{name:"Categories",total:t.categories.total,color:"purple-400",className:"mr-6 mb-6"}),Object(v.jsx)(Ha,{name:"Collections",total:t.collections.total,color:"indigo-400",className:"mr-6 mb-6"}),Object(v.jsx)(Ha,{name:"Authors",total:t.authors.total,color:"pink-400",className:"mr-6 mb-6"}),Object(v.jsx)(Ha,{name:"Publishers",total:t.publishers.total,color:"pink-600",className:"mr-6 mb-6"}),Object(v.jsx)(Ha,{name:"Admins",total:t.admins.total,color:"red-300",className:"mr-6 mb-6"})]})]})},Ha=function(e){var t=e.name,a=e.total,n=e.color,r=e.className;return Object(v.jsxs)(ye.a,{to:"/".concat(t.toLowerCase()),className:"bg-".concat(n," w-48 h-48 flex flex-col items-center justify-around rounded-xl ").concat(null!==r&&void 0!==r?r:""),children:[Object(v.jsx)("h1",{className:"text-white text-3xl",children:t}),Object(v.jsx)("div",{className:"text-white text-5xl",children:a})]})},Ba=function(){var e,t=Object(s.useState)(""),a=Object(Tt.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)(""),i=Object(Tt.a)(c,2),o=i[0],d=i[1],l=function(e){var t=Object(b.a)(Object(b.a)({},Qe),e);return qe.a(rt,t)}(),u=Object(Tt.a)(l,2),h=u[0],O=u[1],m=O.data,p=O.loading,x=O.error;return(null===m||void 0===m||null===(e=m.loginAdmin)||void 0===e?void 0:e.accessToken)||localStorage.getItem("token")?Object(v.jsx)(j.a,{to:"/"}):Object(v.jsxs)("div",{className:"flex flex-col items-center p-4",children:[Object(v.jsx)("input",{className:"p-2 mb-4",type:"email",disabled:p,name:"username",placeholder:"Email",value:n,onChange:function(e){return r(e.target.value)}}),Object(v.jsx)("input",{className:"p-2 mb-4",type:"password",name:"password",disabled:p,placeholder:"Password",value:o,onChange:function(e){return d(e.target.value)}}),x&&Object(v.jsx)("div",{style:{color:"red"},children:"something went wrong"}),Object(v.jsx)("button",{className:"p-2 mb-4 ".concat(p?"text-gray-400":"text-blue-400"),disabled:p,type:"button",onClick:function(){var e=Object(Bt.a)(Ht.a.mark((function e(t){var a,r,c;return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,h({variables:{data:{email:n,password:o}}});case 3:r=e.sent,(null===(a=r.data)||void 0===a?void 0:a.loginAdmin.accessToken)&&localStorage.setItem("token",null===(c=r.data)||void 0===c?void 0:c.loginAdmin.accessToken);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Login"})]})},Ta=a(19),_a=Object(Ta.a)({basename:"/dashboard"}),Ya=function(e){var t=e.children;return Object(v.jsxs)(j.c,{history:_a,children:[t,Object(v.jsxs)(j.d,{children:[Object(v.jsx)(j.b,{path:"/login",children:Object(v.jsx)(Ba,{})}),Object(v.jsx)(h,{path:"/",children:Object(v.jsx)(Fa,{})})]})]})},Wa=a(71),Ka=a(83),Ja=a(133),za=a(92),Ga=a(93),Va=a(131),Xa=a.n(Va)()({uri:null!==(Da=Object({NODE_ENV:"production",PUBLIC_URL:"/dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).GRAPHQL_URL)&&void 0!==Da?Da:"http://localhost:4000/graphql"}),Za=Object(za.a)((function(e,t){var a=t.headers,n=localStorage.getItem("token");return{headers:Object(b.a)(Object(b.a)({},a),{},{authorization:n?"Bearer ".concat(n):""})}})),en=Object(Ga.a)((function(e){var t=e.networkError;401===(null===t||void 0===t?void 0:t.statusCode)&&ba()})),tn={keyArgs:["order","searchQuery"],merge:function(e,t){var a,n;return Object(b.a)(Object(b.a)({},t),{},{items:[].concat(Object(ra.a)(null!==(a=null===e||void 0===e?void 0:e.items)&&void 0!==a?a:[]),Object(ra.a)(null!==(n=null===t||void 0===t?void 0:t.items)&&void 0!==n?n:[]))})}},an=new Wa.a({link:Object(Ka.a)([en,Za,Xa]),cache:new Ja.a({typePolicies:{Query:{fields:{categories:tn,collections:tn,products:tn,users:tn,authors:tn,publishers:tn,admins:tn,requests:tn,orders:tn}},Category:{fields:{products:tn}}}})});var nn=function(){return Object(v.jsx)(u.a,{client:an,children:Object(v.jsx)(Ya,{})})},rn=(a(122),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,136)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))});r.a.extend(i.a),l.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(nn,{})}),document.getElementById("root")),rn()}},[[123,1,2]]]);
//# sourceMappingURL=main.2f4a60bf.chunk.js.map